<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Setup droplet — setup_docklet • bccciss</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Setup droplet — setup_docklet" />
<meta property="og:description" content="Setup droplet
Transform shape files to mbtiles
Open browser to tippecanoe usage manual
Open browser to tileserver GL documentation
Open browser to GL styling documentation
Reset SSH sessions
Launch tileserver GL" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bccciss</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.9990</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Setup droplet</h1>
    
    <div class="hidden name"><code>do_helpers.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Setup droplet</p>
<p>Transform shape files to mbtiles</p>
<p>Open browser to tippecanoe usage manual</p>
<p>Open browser to tileserver GL documentation</p>
<p>Open browser to GL styling documentation</p>
<p>Reset SSH sessions</p>
<p>Launch tileserver GL</p>
    </div>

    <pre class="usage"><span class='fu'>setup_docklet</span><span class='op'>(</span>
  size <span class='op'>=</span> <span class='st'>"s-2vcpu-4gb-intel"</span>,
  region <span class='op'>=</span> <span class='st'>"tor1"</span>,
  image <span class='op'>=</span> <span class='st'>"docker-20-04"</span>,
  tags <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"bccciss"</span>, <span class='st'>"tileserver"</span><span class='op'>)</span>,
  checks <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>remote_shp_tiles</span><span class='op'>(</span>
  <span class='va'>droplet</span>,
  <span class='va'>...</span>,
  <span class='va'>source_dir</span>,
  remote_dir <span class='op'>=</span> <span class='st'>"/tmp/shp"</span>,
  skip_upload <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span>

<span class='fu'>tippecanoe_usage</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>tileserver_doc</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>styling_doc</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>reset_ssh_sessions</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>launch_tileserver</span><span class='op'>(</span><span class='va'>droplet</span>, <span class='va'>config</span>, <span class='va'>styles</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>size</th>
      <td><p>A character string. Size slug identifier. See <code><a href='https://sckott.github.io/analogsea/reference/sizes.html'>analogsea::sizes()</a></code> for a complete
list. Default to <code>s-2vcpu-4gb-intel</code>, large enough to serve layers covering B.C. with fast
memory and disk.</p></td>
    </tr>
    <tr>
      <th>region</th>
      <td><p>A character string. The unique slug identifier for the region that you wish to
deploy in. See <code><a href='https://sckott.github.io/analogsea/reference/regions.html'>analogsea::regions()</a></code> for a complete list. Default to <code>tor1</code> in Canada.</p></td>
    </tr>
    <tr>
      <th>image</th>
      <td><p>A character string. The image ID of a public or private image, or the unique slug
identifier for a public image. This image should have Docker already installer.
See <code><a href='https://sckott.github.io/analogsea/reference/images.html'>analogsea::images()</a></code> for a complete list. Default to <code>docker-20-04</code>.</p></td>
    </tr>
    <tr>
      <th>tags</th>
      <td><p>A vector of tag names to apply to the Droplet after it is created.
Tag names can either be existing or new tags. Default to <code><a href='https://rdrr.io/r/base/c.html'>c("bccciss", "tileserver")</a></code></p></td>
    </tr>
    <tr>
      <th>checks</th>
      <td><p>A boolean. Check that region is <code>tor1</code> and image is official <code>Docker</code>. Default
to false.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional command line arguments for <code>tippecanoe</code></p></td>
    </tr>
    <tr>
      <th>droplet</th>
      <td><p>DO droplet</p></td>
    </tr>
    <tr>
      <th>source_dir</th>
      <td><p>Directory containing shape files</p></td>
    </tr>
    <tr>
      <th>remote_dir</th>
      <td><p>Directory where to upload files on remote. Default to <code>/tmp/shp</code>.</p></td>
    </tr>
    <tr>
      <th>skip_upload</th>
      <td><p>A boolean. Skip upload and convert to geojson part. Default FALSE.</p></td>
    </tr>
    <tr>
      <th>config</th>
      <td><p>Local path to a tileserver config file</p></td>
    </tr>
    <tr>
      <th>styles</th>
      <td><p>Local path to Mapbox GL compatible styles (file or dir)</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A droplet.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Setup a droplet with necessary tooling to convert shape files to vector tiles and
host them using tileserver gl.</p>
<p>Look for shape files in <code>source_dir</code>. Upload <code>source_dir</code> content to droplet
<code>remote_dir</code>. Transform shape files to geojson and call <code>tippecanoe</code> with each layers found
using <code>...</code> for parametrization creating <code>tiles.mbtiles</code>. See <code>tippecanoe_usage()</code> for
<code>tippecanoe</code> usage documentation.</p>
<p>Launch a tileserver GL docker image. Also stops
any already running instances, delete server cache and reload nginx.</p>
<p>If config file is provided, it will be uploaded to server and used
to launch tileserver. See https://tileserver.readthedocs.io/en/latest/config.html
for details about config</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Will MacKenzie, Kiri Daust,  Province of British Columbia.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


